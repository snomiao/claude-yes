# persist agent credentials, you can run seed-credentials.sh to copy from /root
volumes:
  home:

services:
  # docker compose run --build -t agent-yes
  agent-yes:
    build: .
    # image: snomiao/agent-yes
    stdin_open: true
    tty: true
    volumes:
      # Persist home directory for credentials
      - home:/root
      # Mount current workspace
      - ./ws:/ws
    working_dir: /ws
    command: claude-yes -- hello

    # Environment variables for API keys
    # The env_file will load these automatically, no need to duplicate in environment section
    env_file:
      - ./.env.local

    environment:
      - TERM=xterm-color

    # Use bun to run the built binary (node has ES module issues with node-pty)
    # command: hello

    # run
    # docker compose up --watch
    develop:
      watch:
        - action: rebuild
          path: docker-compose.yaml
        - action: rebuild
          path: ./Dockerfile
